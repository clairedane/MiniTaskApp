@{
    ViewBag.Title = "Tasks";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">

    <!-- Header Section -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-primary mb-0">
            <i class="bi bi-list-check"></i> Task Manager
        </h2>
        <button id="btnAddTask" class="btn btn-primary shadow-sm">
            <i class="bi bi-plus-circle"></i> New Task
        </button>
    </div>

    <!-- Card Wrapper -->
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">

            <table class="table table-hover table-striped align-middle mb-0" id="tasksTable">
                <thead class="table-light">
                    <tr>
                        <th style="width:20%">Title</th>
                        <th style="width:40%">Description</th>
                        <th style="width:20%">Status</th>
                        <th style="width:20%" class="text-end">Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        </div>
    </div>

</div>

<!-- TASK MODAL -->
<div id="taskModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow">

            <div class="modal-header bg-primary text-white">
                <h5 id="taskModalTitle" class="modal-title"></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <input type="hidden" id="taskId" />

                <div class="mb-3">
                    <label class="form-label fw-semibold">Title</label>
                    <input class="form-control" id="taskTitle" placeholder="Enter task title" />
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Description</label>
                    <textarea class="form-control" id="taskDescription" rows="3"
                              placeholder="Enter task description"></textarea>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    Cancel
                </button>
                <button id="btnSaveTask" class="btn btn-success px-4">
                    <i class="bi bi-check-circle"></i> Save Task
                </button>
            </div>

        </div>
    </div>
</div>

<script src="~/Scripts/Modules/tasks.js"></script>

@section scripts {
    <script>
        $(document).ready(function () {
            loadTasks();

            $("#btnAddTask").click(function () {
                clearTaskForm();
                $("#taskModalTitle").text("Create Task");
                $("#taskModal").modal("show");
            });

            $("#btnSaveTask").click(saveTask);
        });
    </script>
}